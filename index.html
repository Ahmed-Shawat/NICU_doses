<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة أدوية NICU</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            justify-content: center;
        }
        .tab-btn {
            padding: 10px 20px;
            background: #f1f1f1;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin: 0 5px;
            border-radius: 5px 5px 0 0;
        }
        .tab-btn.active {
            background: #3498db;
            color: white;
        }
        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tab-content.active {
            display: block;
        }
        .calculator {
            margin-top: 10px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        select, input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
            font-size: 16px;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4f8;
            border-radius: 4px;
            display: none;
            border-right: 4px solid #3498db;
        }
        .note {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 10px;
            font-style: italic;
        }
        .dosage-type {
            margin: 15px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .highlight {
            background-color: #fffde7;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>حاسبة أدوية العناية المركزة لحديثي الولادة</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('intervals')">الفترات الزمنية</button>
        <button class="tab-btn" onclick="openTab('dosages')">جرعات الأدوية</button>
    </div>
    
    <!-- Intervals Tab -->
    <div id="intervals" class="tab-content active">
        <div class="calculator">
            <div class="form-group">
                <label for="drug">اختر الدواء:</label>
                <select id="drug">
                    <option value="">-- اختر دواء --</option>
                    <option value="unasyn">يوناسين (أمبيسيلين/سولبكتام)</option>
                    <option value="gentamycin">جنتاميسين</option>
                    <option value="cefotax">سيفوتاكس (سيفوتاكسيم)</option>
                    <option value="vancomycin">فانكوميسين</option>
                    <option value="meronam">ميرونام (ميروبينيم)</option>
                    <option value="flagyl">فلاجيل (مترونيدازول)</option>
                    <option value="diflucan">ديفلوكان (فلوكونازول)</option>
                    <option value="dalacin">دالاسين-سي (كليندامايسين)</option>
                    <option value="avrezolid">أفريزوليد (لينزوليد)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pma">العمر الحملي بالأسبوع:</label>
                <input type="number" id="pma" min="22" max="45" placeholder="أدخل العمر الحملي بالأسبوع">
            </div>
            
            <div class="form-group">
                <label for="postnatal">العمر بعد الولادة بالأيام:</label>
                <input type="number" id="postnatal" min="0" placeholder="أدخل العمر بعد الولادة بالأيام">
            </div>
            
            <button onclick="calculateInterval()">احسب الفترة الزمنية</button>
            
            <div id="intervalResult" class="result"></div>
        </div>
    </div>
    
    <!-- Dosages Tab -->
    <div id="dosages" class="tab-content">
        <div class="calculator">
            <div class="form-group">
                <label for="drugDosage">اختر الدواء:</label>
                <select id="drugDosage" onchange="showDosageOptions()">
                    <option value="">-- اختر دواء --</option>
                    <option value="unictam">يونيكتام 375 مجم</option>
                    <option value="gentamycin">جنتاميسين 80 مجم</option>
                    <option value="amikacin">أميكين 100 مجم</option>
                    <option value="calcium">كالسيوم جلوكونات</option>
                    <option value="meropenem">ميرونام 500 مجم</option>
                    <option value="vancomycin">فانكوميسين 500 مجم</option>
                    <option value="fortum">فورتم 500 مجم</option>
                    <option value="diflucan">ديفلوكان 200 مجم</option>
                    <option value="flagyl">فلاجيل 500 مجم</option>
                    <option value="cefotax">سيفوتاكس 500 مجم</option>
                    <option value="avrezolid">أفرزوليد 200 مجم</option>
                    <option value="dalacin">دالاسين سي 600 مجم</option>
                    <option value="phenobarbital">سومناليتا 40 مجم</option>
                    <option value="phenytoin">إيبانوتين 250 مجم</option>
                    <option value="Caffeine">كافيين ستريت</option>
                    <option value="konakion">كوناكيون</option>
                    <option value="dopamine1">دوبامين (1+7)</option>
                    <option value="dopamine2">دوبامين غير مخفف</option>
                    <option value="dobutamine">دوبيوتامين غير مخفف</option>
                    <option value="adrenaline">أدرينالين</option>
                    <option value="sildenafil">سيليدين</option>
                    <option value="lasix">لازكس</option>
                </select>
            </div>
            
            <div id="dosageOptions"></div>
            
            <div class="form-group">
                <label for="weight">وزن الطفل (كجم):</label>
                <input type="number" id="weight" min="0.5" max="10" step="0.01" placeholder="أدخل وزن الطفل بالكيلوجرام">
            </div>
            
            <button onclick="calculateDosage()">احسب الجرعة</button>
            
            <div id="dosageResult" class="result"></div>
        </div>
    </div>

    <script>
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        function showDosageOptions() {
            const drug = document.getElementById('drugDosage').value;
            const optionsDiv = document.getElementById('dosageOptions');
            optionsDiv.innerHTML = '';
            
            switch(drug) {
                case 'vancomycin':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="septic">جرعة الإنتان</option>
                                <option value="meningitic">جرعة التهاب السحايا</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'diflucan':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة التحميل</option>
                                <option value="maintenance">جرعة المداومة</option>
                                <option value="prophylactic">جرعة الوقاية</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'Caffeine':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة التحميل</option>
                                <option value="maintenance">جرعة المداومة</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'konakion':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة النزيف</option>
                                <option value="maintenance">جرعة الوقاية</option>
                            
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'phenobarbital':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة التحميل</option>
                                <option value="maintenance">جرعة المداومة</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'phenytoin':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة التحميل</option>
                                <option value="maintenance">جرعة المداومة</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'flagyl':
                    optionsDiv.innerHTML = `
                        <div class="dosage-type">
                            <label>نوع الجرعة:</label>
                            <select id="doseType">
                                <option value="loading">جرعة التحميل</option>
                                <option value="maintenance">جرعة المداومة</option>
                            </select>
                        </div>
                    `;
                    break;
            }
        }
        
        function calculateInterval() {
            const drug = document.getElementById('drug').value;
            const pma = parseInt(document.getElementById('pma').value);
            const postnatal = parseInt(document.getElementById('postnatal').value);
            const resultDiv = document.getElementById('intervalResult');
            
            if (!drug || isNaN(pma) || isNaN(postnatal)) {
                alert('الرجاء اختيار دواء وإدخال عمر حملي وعمر بعد الولادة صحيحين');
                return;
            }
            
            let interval = '';
            let notes = '';
            
            switch(drug) {
                case 'unasyn':
                    if (pma <= 29) {
                        interval = postnatal <= 28 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 30 && pma <= 36) {
                        interval = postnatal <= 14 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 37 && pma <= 44) {
                        interval = postnatal <= 7 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 45) {
                        interval = '6 ساعات';
                    }
                    break;
                    
                case 'gentamycin':
                    if (pma <= 29) {
                        if (postnatal <= 7) {
                            interval = '48 ساعة (5 مجم/كجم)';
                        } else if (postnatal <= 28) {
                            interval = '36 ساعة (4 مجم/كجم)';
                        } else {
                            interval = '24 ساعة (4 مجم/كجم)';
                        }
                    } else if (pma >= 30 && pma <= 34) {
                        interval = postnatal <= 7 ? '36 ساعة (4.5 مجم/كجم)' : '24 ساعة (4 مجم/كجم)';
                    } else if (pma >= 35) {
                        interval = '24 ساعة (4 مجم/كجم)';
                    }
                    notes = '* أو وجود اختناق معنوي، قناة شريانية مفتوحة، أو علاج بإندوميثاسين';
                    break;
                    
                case 'cefotax':
                    if (pma <= 29) {
                        interval = postnatal <= 28 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 30 && pma <= 36) {
                        interval = postnatal <= 14 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 37 && pma <= 44) {
                        interval = postnatal <= 7 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 45) {
                        interval = '6 ساعات';
                    }
                    break;
                    
                case 'vancomycin':
                    if (pma <= 29) {
                        interval = postnatal <= 14 ? '18 ساعة' : '12 ساعة';
                    } else if (pma >= 30 && pma <= 36) {
                        interval = postnatal <= 14 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 37 && pma <= 44) {
                        interval = postnatal <= 7 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 45) {
                        interval = '6 ساعات';
                    }
                    break;
                    
                case 'meronam':
                    if (pma < 32) {
                        interval = postnatal <= 14 ? '12 ساعة' : '8 ساعات';
                    } else {
                        interval = postnatal <= 7 ? '12 ساعة' : '8 ساعات';
                    }
                    break;
                    
                case 'flagyl':
                    if (pma <= 29) {
                        interval = postnatal <= 28 ? '48 ساعة' : '24 ساعة';
                    } else if (pma >= 30 && pma <= 36) {
                        interval = postnatal <= 14 ? '24 ساعة' : '12 ساعة';
                    } else if (pma >= 37 && pma <= 44) {
                        interval = postnatal <= 7 ? '24 ساعة' : '12 ساعة';
                    } else if (pma >= 45) {
                        interval = '8 ساعات';
                    }
                    break;
                    
                case 'diflucan':
                    if (pma <= 29) {
                        interval = postnatal <= 14 ? '48 ساعة' : '24 ساعة';
                    } else {
                        interval = postnatal <= 7 ? '48 ساعة' : '24 ساعة';
                    }
                    break;
                    
                case 'dalacin':
                    if (pma <= 29) {
                        interval = postnatal <= 28 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 30 && pma <= 36) {
                        interval = postnatal <= 14 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 37 && pma <= 44) {
                        interval = postnatal <= 7 ? '12 ساعة' : '8 ساعات';
                    } else if (pma >= 45) {
                        interval = '6 ساعات';
                    }
                    break;
                    
                case 'avrezolid':
                    if (postnatal <= 14) {
                        interval = '12 ساعة';
                    } else if (postnatal <= 28) {
                        interval = '8 ساعات';
                    } else {
                        interval = '8 ساعات';
                    }
                    break;
                    
                default:
                    interval = 'غير متوفر';
            }
            
            resultDiv.innerHTML = `
                <h3>الفترة الزمنية الموصى بها لـ ${document.getElementById('drug').options[document.getElementById('drug').selectedIndex].text}</h3>
                <p><strong>العمر الحملي:</strong> ${pma} أسابيع</p>
                <p><strong>العمر بعد الولادة:</strong> ${postnatal} أيام</p>
                <p><strong>الفترة الزمنية:</strong> ${interval}</p>
                ${notes ? `<p class="note">${notes}</p>` : ''}
            `;
            resultDiv.style.display = 'block';
        }
        
        function calculateDosage() {
            const drug = document.getElementById('drugDosage').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const resultDiv = document.getElementById('dosageResult');
            
            if (!drug || isNaN(weight)) {
                alert('الرجاء اختيار دواء وإدخال وزن صحيح');
                return;
            }
            
            let preparation = '';
            let notes = '';
            let doseType = '';
            
            // Get dose type if available
            const doseTypeElement = document.getElementById('doseType');
            if (doseTypeElement) {
                doseType = doseTypeElement.options[doseTypeElement.selectedIndex].text;
            }
            
            switch(drug) {
                case 'unictam':
                    preparation = `${weight} سم + ${weight} سم ج 5%`;
                    notes = "وريدي";
                    break;
                    
                case 'gentamycin':
                    preparation = `${weight} سم + يستكمل لـ 5 سم ج 5%`;
                    notes = "وريدي ببطئ";
                    break;
                    
                case 'amikacin':
                    preparation = `${weight * 3} سم + ${weight} سم ج 5%`;
                    notes = "وريدي ببطئ";
                    break;
                    
                case 'calcium':
                    preparation = `${weight} سم + ${weight} سم ج 5%`;
                    notes = "وريدي ببطئ شديد";
                    break;
                    
                case 'meropenem':
                    preparation = `${weight} سم + ${weight} سم ج 5%`;
                    notes = "وريدي ببطئ";
                    break;
                    
                case 'vancomycin':
                    const vancType = doseTypeElement ? doseTypeElement.value : '';
                    if (vancType === 'septic') {
                        preparation = `${(0.2 * weight).toFixed(1)} سم`;
                    } else {
                        preparation = `${(0.3 * weight).toFixed(1)} سم`;
                    }
                    notes = "وريدي ببطئ";
                    break;
                    
                case 'fortum':
                    preparation = `${weight} سم`;
                    notes = "وريدي";
                    break;
                    
                case 'diflucan':
                    const diflucanType = doseTypeElement ? doseTypeElement.value : '';
                    if (diflucanType === 'loading') {
                        preparation = `${6 * weight} سم + ${weight} سم ج 5% مرة واحدة`;
                    } else if (diflucanType === 'maintenance') {
                        preparation = `${weight * 3} سم + ${weight} سم ج 5% مرة في اليوم`;
                    } else {
                        preparation = `${weight * 1.5} سم + ${weight} سم ج 5% كل 72 ساعة`;
                    }
                    notes = "Not in impaired liver function";
                    break;
                    
                case 'flagyl':
                    const flagylType = doseTypeElement ? doseTypeElement.value : '';
                    if (flagylType === 'loading') {
                        preparation = `${weight * 3} سم + ${weight} سم ج 5% مرة واحدة`;
                    } else {
                        preparation = `${weight * 1.5} سم + ${weight} سم ج 5% كل 12 ساعة`;
                    }
                    break;
                    
                case 'cefotax':
                    preparation = `${weight} سم ج`;
                    notes = "وريدي";
                    break;
                    
                case 'avrezolid':
                    preparation = `${weight * 5} سم + ${weight} سم ج 5%`;
                    notes = "وريدي ببطئ";
                    break;
                    
                case 'dalacin':
                    preparation = `${0.5 * weight} سم + ${weight} سم ج 5%`;
                    break;
                    
                case 'phenobarbital':
                   const phenobarbitalType = doseTypeElement ? doseTypeElement.value : '';
                    if (phenobarbitalType === 'loading') {
                        preparation = `${weight * 2} سم`;
                    } else {
                        preparation = `${(3 * weight) / 20} سم كل 12 ساعة علي [علي جرعة 3]`;
                    }
                    notes = "وريدي";
                    break;
                    
                case 'phenytoin':
                    const phenytoinType = doseTypeElement ? doseTypeElement.value : '';
                    if (phenytoinType === 'loading') {
                        preparation = `${weight * 2} سم`;
                    } else {
                        preparation = `${weight / 4} سم كل 12 ساعة`;
                    }
                    notes = "يحل في محلول ملح ويعطي وريدي ببطئ شديد";
                    break;
                    
                case 'Caffeine':
                    const CaffeineType = doseTypeElement ? doseTypeElement.value : '';
                    if (CaffeineType === 'loading') {
                        preparation = `${weight} سم + ${weight} سم ج 5%`;
                    } else {
                        preparation = `${0.3 * weight} سم + ${weight} سم ج 5%`;
                    }
                    notes = "Till 34 weeks";
                    break;
                    
                case 'konakion':
                    notes = "يحل في محلول ملح ويعطي وريدي ببطئ شديد";
                    break;
                    
                case 'dopamine1':
                    preparation = `${(1.44 * weight).toFixed(3)} سم + يستكمل إلى 24 سم ج 5% بمعدل 1 سم/ساعة`;
                    notes = "وريدي";
                    break;
                    
                case 'dopamine2':
                    preparation = `${(0.18 * weight).toFixed(3)} سم + يستكمل إلى 24 سم ج 5% بمعدل 1 سم/ساعة`;
                    notes = "وريدي";
                    break;
                    
                case 'dobutamine':
                    preparation = `${(1.15 * weight).toFixed(3)} سم + يستكمل إلى 24 سم ج 5% بمعدل 1 سم/ساعة`;
                    notes = "وريدي";
                    break;
                    
                case 'adrenaline':
                    preparation = `${(0.14 * weight).toFixed(3)} سم + يستكمل إلى 24 سم ج 5% بمعدل 1 سم/ساعة`;
                    notes = "[علي جرعة 0.1]";
                    break;
                    
                case 'sildenafil':
                    preparation = `${weight} سم كل 12 ساعة`;
                    notes = "ربع القرص + 6.25 ج 5% بالرايل";
                    break;
                    
                case 'lasix':
                    preparation = `${weight} سم كل 12 ساعة`;

                    break;
            }
            
            // Format preparation for insulin syringe if needed
            if (preparation.includes("شرطة")) {
                const totalUnits = parseFloat(preparation.split(" ")[0]);
                if (totalUnits >= 100) {
                    const ml = Math.floor(totalUnits / 100);
                    const remainingUnits = totalUnits % 100;
                    preparation = `${ml} سم + ${remainingUnits} شرطة`;
                }
            }
            
            resultDiv.innerHTML = `
                <h3>${document.getElementById('drugDosage').options[document.getElementById('drugDosage').selectedIndex].text}</h3>
                ${doseType ? `<p><strong>نوع الجرعة:</strong> ${doseType}</p>` : ''}
                <p><strong>الوزن:</strong> ${weight} كجم</p>
                ${preparation ? `<p><strong>الإسكيمة:</strong> ${preparation}</p>` : ''}
                ${notes ? `<p class="note">${notes}</p>` : ''}
            `;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>